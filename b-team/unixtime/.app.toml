
# Name of the application
name = "unixtime"

# Task-includes that the task inherits.
# Includes are specified in the format <filepath>#<ID>.
# Paths are relative to the application directory.
includes = []

[[Task]]
  name = "build"

  # Command to execute.
  # The first element is the command, the following it's arguments.
  # If the command element contains no path seperators,
  # the path is looked up via the $PATH environment variable.
  command = [
    "sh",
    "-c",
    "make clean docker_build",
  ]

  # Input or Output includes that the task inherits.
  # Includes are specified in the format <filepath>#<ID>.
  # Paths are relative to the application directory.
  includes = []

  # Specification of task inputs like source files, Makefiles, etc
  [Task.Input]

    [[Task.Input.Files]]

      # Relative path to source files.
      # Golang's Glob syntax (https://golang.org/pkg/path/filepath/#Match)
      # and ** is supported to match files recursively.
      paths = [
        "*.c",
        "Makefile",
      ]

      # If true, baur will not fail if a Path resolves to 0 files.
      optional = false

      # Ignore files that are not tracked in git.
      git_tracked_only = true

  # Specification of task outputs produced by the Task.command
  [Task.Output]

    [[Task.Output.File]]

      # Path relative to the application directory.
      path = "dist/unixtime"

      [[Task.Output.File.FileCopy]]

        # Destination directory
        path = "/tmp/baur_build_artifacts/{{ .AppName }}-{{ gitCommit }}"
